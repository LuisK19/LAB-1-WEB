<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Características del desarrollo web moderno</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
      body {
        font-family: sans-serif;
        max-width: 800px;
        margin: 2rem auto;
        padding: 1rem;
        line-height: 1.6;
      }
      h1, h2 {
        color: #2c3e50;
      }
      /* Estilos para contenedores de diagramas */
      .mermaid {
        background-color: #f8f9fa;
        padding: 1rem;
        border-radius: 5px;
        margin: 1rem 0;
        overflow: auto;
      }
    </style>
  </head>
  <body>
    <h1>Documentación técnica</h1>
    <div id="content">Cargando documentación...</div>

    <script>
      // Configuración de Mermaid
      mermaid.initialize({ 
        startOnLoad: false, // Desactivamos carga automática
        theme: 'default',
        flowchart: { 
          useMaxWidth: true,
          htmlLabels: true 
        }
      });

      // Función para renderizar Mermaid después de cargar el Markdown
      function renderMermaid() {
        const mermaidElements = document.querySelectorAll('.mermaid');
        if (mermaidElements.length > 0) {
          mermaid.init(undefined, mermaidElements);
        }
      }

      // Cargar y renderizar el README.md
      fetch("README.md")
        .then((res) => res.text())
        .then((md) => {
          document.getElementById("content").innerHTML = marked.parse(md);
          // Esperar a que se renderice el Markdown antes de procesar Mermaid
          setTimeout(renderMermaid, 100);
        })
        .catch((err) => {
          console.error("Error loading README.md:", err);
          document.getElementById("content").innerHTML = 
            "<p>Error al cargar la documentación. Verifica la consola para más detalles.</p>";
        });
    </script>
  </body>
</html>